# ServiceAccount for the AWS Load Balancer Controller.
# Annotated for IRSA (IAM Roles for Service Accounts) so the controller pod
# can call AWS APIs (EC2, ELB, ACM, WAF) without node-level instance profiles.
#
# Prerequisites (provisioned by Terraform):
#   - OIDC provider associated with the EKS cluster
#   - IAM role with the AWSLoadBalancerControllerIAMPolicy attached
#   - Trust policy that allows the OIDC provider to assume the role for this SA
#
# Replace <ACCOUNT_ID> and <CLUSTER_NAME> with real values, or let Terraform
# template this file via a data source before applying.
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: aws-load-balancer-controller
  namespace: ingress
  labels:
    app.kubernetes.io/name: aws-load-balancer-controller
    app.kubernetes.io/component: controller
  annotations:
    # IRSA annotation â€” Terraform outputs the role ARN after cluster creation.
    eks.amazonaws.com/role-arn: arn:aws:iam::<ACCOUNT_ID>:role/<CLUSTER_NAME>-aws-lb-controller
